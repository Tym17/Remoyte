<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Remoyte Setup</title>
    <link rel="stylesheet" type="text/css" href="output.css" />
  </head>
  <body>
    <h1>Setup</h1>
    It seems that Remoyte is not configured. Here are the steps to configure it:
    <ol>
        <li>Open your browser and navigate to: discordapp.com/developers.</li>
        <li>Create an application.</li>
        <li>Copy the application client id here:
                <input type="text" id="clientid" placeholder="Client id" />
            </li>
        <li>Create a bot user and customize it to your liking (Make sure to untick the Public bot option).</li>
        <li>Copy the bot Token here:
            <input type="text" id="token" placeholder="Bot Token"/>
        </li>
        <li>Invite your bot to your discord with the link generated by pressing this <button onclick="makeInviteUrl()">Button</button>. (If the link doesn't work, make sure to have pasted a proper Id for the client id field)</li>
        <li>Hit this <button onclick="saveEverything()">Button</button> and restart Remoyte.</li>
    </ol>

    <script>
        const { shell, remote }  = require('electron');
        const fs = require('fs');

        let makeInviteUrl = () => {
            let clientid = document.getElementById('clientid').value;
            let url = `https://discordapp.com/api/oauth2/authorize?client_id=${clientid}&scope=bot`;

            shell.openExternal(url);
        };

        let saveEverything = () => {
            try {
                fs.unlinkSync('./botconf.json');
            } catch (e)
            {
                console.log(e);
            }

            let botconf = {
                clientid: document.getElementById('clientid').value,
                bottoken: document.getElementById('token').value
            };

            fs.writeFileSync('./botconf.json', JSON.stringify(botconf));
        };
    </script>
  </body>
</html>